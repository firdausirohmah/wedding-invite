<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Syaiful Putri Selaras</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Syaiful Putri Selaras" />
	<meta name="keywords" content="syaiful putri selaras, syaiful, putri, selaras" />
	<meta name="author" content="Syaiful Putri Selaras" />

  <!-- 
	//////////////////////////////////////////////////////

	FREE HTML5 TEMPLATE 
	DESIGNED & DEVELOPED by FREEHTML5.CO
		
	Website: 		http://freehtml5.co/
	Email: 			info@freehtml5.co
	Twitter: 		http://twitter.com/fh5co
	Facebook: 		https://www.facebook.com/fh5co

	//////////////////////////////////////////////////////
	 -->

  	<!-- Facebook and Twitter integration -->
	<meta property="og:title" content=""/>
	<meta property="og:image" content=""/>
	<meta property="og:url" content=""/>
	<meta property="og:site_name" content=""/>
	<meta property="og:description" content=""/>
	<meta name="twitter:title" content="" />
	<meta name="twitter:image" content="" />
	<meta name="twitter:url" content="" />
	<meta name="twitter:card" content="" />

	<link href='https://fonts.googleapis.com/css?family=Work+Sans:400,300,600,400italic,700' rel='stylesheet' type='text/css'>
	<link href="https://fonts.googleapis.com/css?family=Sacramento" rel="stylesheet">
	
	<!-- Animate.css -->
	<link rel="stylesheet" href="css/animate.css">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="css/icomoon.css">
	<!-- Bootstrap  -->
	<link rel="stylesheet" href="css/bootstrap.css">

	<!-- Magnific Popup -->
	<link rel="stylesheet" href="css/magnific-popup.css">

	<!-- Owl Carousel  -->
	<link rel="stylesheet" href="css/owl.carousel.min.css">
	<link rel="stylesheet" href="css/owl.theme.default.min.css">

	<!-- light Gallery -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.0.0-beta.3/css/lightgallery.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.0.0-beta.3/css/lg-zoom.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.0.0-beta.3/css/lg-thumbnail.css">


	<!-- Theme style  -->
	<!-- <link rel="stylesheet" href="css/1.css"> -->
	<!-- <link rel="stylesheet" href="css/2.css"> -->
	<!-- <link rel="stylesheet" href="css/3.css"> -->
	<link rel="stylesheet" href="css/index.css">

	<!-- Modernizr JS -->
	<script src="js/modernizr-2.6.2.min.js"></script>
	<!-- FOR IE9 below -->
	<!--[if lt IE 9]>
	<script src="js/respond.min.js"></script>
	<![endif]-->

	</head>
	<body>

    <header id="fh5co-header" class="fh5co-cover" role="banner" style="background-position: center;" data-stellar-background-ratio="0.5">
      <div class="overlay"></div>
      <div class="container">
        <div class="row">
          <div class="col-md-8 col-md-offset-2 text-center">
            <div class="display-t">
              <div class="display-tc animate-box" data-animate-effect="fadeIn">
                <h2 class="font-50">SELARAS</h2>
                <h1>Syaiful &amp; Putri</h1> <br><br><br><br>
                <br><br><br><br>
                <br><br><br><br>
                <p><a href="main.html" class="btn btn-default btn-sm">Open invitation</a></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>

  <!-- jQuery -->
      <script src="js/jquery.min.js"></script>
      <!-- jQuery Easing -->
      <script src="js/jquery.easing.1.3.js"></script>
      <!-- Bootstrap -->
      <script src="js/bootstrap.min.js"></script>
      <!-- Waypoints -->
      <script src="js/jquery.waypoints.min.js"></script>
      <!-- Carousel -->
      <script src="js/owl.carousel.min.js"></script>
      <!-- countTo -->
      <script src="js/jquery.countTo.js"></script>

      <!-- Stellar -->
      <script src="js/jquery.stellar.min.js"></script>
      <!-- Magnific Popup -->
      <script src="js/jquery.magnific-popup.min.js"></script>
      <script src="js/magnific-popup-options.js"></script>

      <!-- // <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/0.0.1/prism.min.js"></script> -->
      <script src="js/simplyCountdown.js"></script>

      <!-- light gallery -->
      <!-- <script src="bower_components/lightgallery/dist/lightgallery.umd.js"></script> -->

      <!-- lightgallery plugins -->
      <!-- <script src="bower_components/lightgallery/dist/plugins/thumbnail/lg-thumbnail.umd.js"></script>
      <script src="bower_components/lightgallery/dist/plugins/zoom/lg-zoom.umd.js"></script> -->

      <script src="https://cdn.jsdelivr.net/npm/lightgallery@2.0.0-beta.3/lightgallery.umd.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/lightgallery@2.0.0-beta.3/plugins/zoom/lg-zoom.umd.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/lightgallery@2.0.0-beta.3/plugins/thumbnail/lg-thumbnail.umd.js"></script>
      <!-- Main -->
      <script src="js/main.js"></script>

      <script>
        var testimonialCarousel = function(){
          var owl = $('.owl-carousel-fullwidth');
          owl.owlCarousel({
            items: 1,
            loop: true,
            margin: 0,
            responsiveClass: true,
            nav: false,
            dots: true,
            smartSpeed: 800,
            autoHeight: true,
          });
        };
        let base_url = '';
        console.log(window.location, 'location');
        if (window.location.hostname === 'www.syaifulputriselaras.com') {
          // production
          base_url = 'https://server-wedding.vercel.app';
        } else {
          base_url = "https://staging-server-wedding.vercel.app";
        }
        let try_fetch = 0;
        let try_submit = 0;
        function fetchDataWish() {
          $.get(base_url + "/api/wish", function(data, status){
            if (data) {
              if (data.data.length > 1) {
                $('#wishes').html('');
              }
              for(const wish of data.data || []) {
                $('#wishes').append(`<div class="item">
                          <div class="testimony-slide active text-center">
                            <span>${wish.sender}</span>
                            <blockquote>
                              <p>"${wish.wis}"</p>
                            </blockquote>
                          </div>
                        </div>`);
              }
              testimonialCarousel();
            }
          }).fail(function () {
            try_fetch = try_fetch + 1;
            if (try_fetch < 5) {
              fetchDataWish();
            } else {
              testimonialCarousel();
            }
          });
        }
        $(function(){
          fetchDataWish()
        });
        function submit_wish() {
          const payload = {
            sender: $('#sender').val(),
            amount: parseFloat($('#amount').val()) || 0,
            wishes: $('#wishes_word').val(),
          }
          if (payload.sender !== '' || payload.amount > 0 || payload.wishes !== ''){
            $('#send_button').prop('disabled', true);
            $.ajax({
              type: "POST",
              url: base_url + "/api/wish",
              contentType: 'application/json; charset=utf-8',
              data: JSON.stringify(payload),
              dataType: 'json',
              success: function (data, status) {
                console.log(data, 'its success');
                if(data.redirect_url) {
                  window.location.replace(data.redirect_url);
                }
              },
              error: function() {
                try_submit = try_submit + 1;
                if (try_fetch < 3) {
                  submit_wish();
                }
              }
            });
          }
        }
        var d = new Date("2021-12-28");

        // default example
        simplyCountdown('.simply-countdown-one', {
            year: d.getFullYear(),
            month: d.getMonth() + 1,
            day: d.getDate()
        });

        //jQuery example
        $('#simply-countdown-losange').simplyCountdown({
            year: d.getFullYear(),
            month: d.getMonth() + 1,
            day: d.getDate(),
            enableUtc: false
        });
        jQuery("#animated-thumbnails-gallery").justifiedGallery({
          captions: false,
          lastRow: "hide",
          rowHeight: 180,
          margins: 5
        }).on("jg.complete", function () {
          window.lightGallery(
            document.getElementById("animated-thumbnails-gallery"),
            {
              autoplayFirstVideo: false,
              pager: false,
              galleryId: "nature",
              plugins: [lgZoom, lgThumbnail],
              mobileSettings: {
                controls: false,
                showCloseIcon: false,
                download: false,
                rotate: false
              }
            }
          );
        });
        
    </script>

  </body>
  </html>